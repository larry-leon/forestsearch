% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sg_consistency_refactor-2.r
\name{subgroup.consistency.refactored}
\alias{subgroup.consistency.refactored}
\title{Subgroup Consistency Evaluation (REFACTORED WITH HELPER)}
\usage{
subgroup.consistency.refactored(
  df,
  hr.subgroups,
  hr.threshold = 1,
  hr.consistency = 1,
  pconsistency.threshold = 0.9,
  m1.threshold = Inf,
  n.splits = 100,
  details = FALSE,
  by.risk = 12,
  plot.sg = FALSE,
  maxk = 7,
  Lsg,
  confs_labels,
  sg_focus = "hr",
  stop_Kgroups = 10,
  pconsistency.digits = 2,
  checking = FALSE,
  parallel_args = list(NULL)
)
}
\arguments{
\item{df}{The original data.frame.}

\item{hr.subgroups}{Data.table of subgroup hazard ratio results.}

\item{hr.threshold}{Minimum hazard ratio for subgroup inclusion.}

\item{hr.consistency}{Minimum hazard ratio for consistency in splits.}

\item{pconsistency.threshold}{Minimum proportion of splits meeting consistency.}

\item{m1.threshold}{Maximum median survival for treatment arm.}

\item{n.splits}{Number of random splits for consistency evaluation.}

\item{details}{Logical; print details.}

\item{by.risk}{Risk interval for plotting.}

\item{plot.sg}{Logical; plot subgroup curves.}

\item{maxk}{Maximum number of covariates in a subgroup.}

\item{Lsg}{Number of covariates.}

\item{confs_labels}{Covariate label mapping.}

\item{sg_focus}{Sorting focus.}

\item{stop_Kgroups}{Maximum number of subgroups to identify.}

\item{pconsistency.digits}{Significant digits for pconsistency.threshold}

\item{checking}{Logical; for debugging.}

\item{parallel_args}{List for parallel processing.}
}
\value{
A list with results for top subgroups and recommended treatment flags.
}
\description{
Evaluates consistency of subgroups found in a survival analysis, using random
splits and hazard ratio criteria. This refactored version uses a helper function
for the core evaluation logic, enabling cleaner parallel/sequential execution.
}
