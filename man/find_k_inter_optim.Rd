% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_k_inter_efficient_documented.R
\name{find_k_inter_optim}
\alias{find_k_inter_optim}
\title{Optimization Method for Finding k_inter}
\usage{
find_k_inter_optim(
  target_hr_harm,
  initial_k_inter = 0,
  data,
  continuous_vars,
  factor_vars,
  outcome_var,
  event_var,
  treatment_var,
  subgroup_vars,
  subgroup_cuts,
  k_treat = 1,
  n_super = 5000,
  verbose = TRUE
)
}
\arguments{
\item{target_hr_harm}{Numeric target hazard ratio for harm subgroup.}

\item{initial_k_inter}{Numeric starting value for optimization. Default is 0.}

\item{data}{A data.frame containing the dataset.}

\item{continuous_vars}{Character vector of continuous variable names.}

\item{factor_vars}{Character vector of factor variable names.}

\item{outcome_var}{Character string of outcome variable name.}

\item{event_var}{Character string of event variable name.}

\item{treatment_var}{Character string of treatment variable name.}

\item{subgroup_vars}{Character vector of subgroup variable names.}

\item{subgroup_cuts}{Named list of cutpoint specifications.}

\item{k_treat}{Numeric treatment effect modifier. Default is 1.}

\item{n_super}{Integer size of super population. Default is 5000.}

\item{verbose}{Logical for progress output. Default is TRUE.}
}
\value{
A list of class "k_inter_optim_result" containing:
\describe{
\item{k_inter}{Numeric optimal k_inter value}
\item{achieved_hr_harm}{Numeric achieved hazard ratio}
\item{target_hr_harm}{Numeric target hazard ratio}
\item{dgm}{Object of class "aft_dgm_flex"}
\item{convergence}{Integer convergence code (0 = success)}
\item{method}{Character string "optimization"}
}
}
\description{
Uses optimization (Brent's method) to find the interaction parameter that
minimizes the squared error between achieved and target hazard ratio.
}
\details{
This function minimizes the squared error:
\deqn{(HR_{harm}(k_{inter}) - HR_{target})^2}

using bounded optimization (Brent's method) which is suitable for
one-dimensional optimization problems.
}
\examples{
\dontrun{
result <- find_k_inter_optim(
  target_hr_harm = 2.0,
  initial_k_inter = 0,
  data = gbsg,
  continuous_vars = c("age", "er", "pgr"),
  factor_vars = c("meno", "grade"),
  outcome_var = "rfstime",
  event_var = "status",
  treatment_var = "hormon",
  subgroup_vars = c("er", "meno"),
  subgroup_cuts = list(er = 20, meno = 0)
)
}

}
