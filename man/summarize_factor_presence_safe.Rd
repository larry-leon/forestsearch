% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bootstrap_summaries_helpers.R
\name{summarize_factor_presence_safe}
\alias{summarize_factor_presence_safe}
\title{Summarize Factor Presence - Safe Implementation}
\usage{
summarize_factor_presence_safe(results, maxk = 2, threshold = 20)
}
\arguments{
\item{results}{Data.table or data.frame. Bootstrap results with subgroup
characteristics. Will be converted to data.frame internally for processing.}

\item{maxk}{Integer. Maximum number of factors allowed (default: 2).}

\item{threshold}{Numeric. Percentage threshold (default: 20).}
}
\value{
Same as \code{summarize_factor_presence} but guaranteed to work:
\describe{
\item{base_factors}{Data.table with base factor frequencies}
\item{specific_factors}{Data.table with specific factor definitions}
\item{threshold}{The threshold value used}
}
}
\description{
A robust version of \code{summarize_factor_presence} that avoids data.table
ordering issues by using base R operations. This function is guaranteed not
to fail due to column name conflicts.
}
\details{
Implementation differences from original:
\itemize{
\item Converts data.table to data.frame at start
\item Uses base R \code{order()} with explicit column references
\item Converts back to data.table only at the end
\item No reliance on data.table's special evaluation
}

Performance: Slightly slower than pure data.table operations but more reliable.
The performance difference is negligible for typical bootstrap results (<10k rows).
}
\note{
This is the recommended function for production use when stability is more
important than minor performance gains.
}
\examples{
# Always works, regardless of environment
result <- summarize_factor_presence_safe(bootstrap_results, maxk = 2)

# Access results
print(result$base_factors)     # Frequency of base factors
print(result$specific_factors) # Specific definitions >= 20\%

}
\seealso{
\code{\link{summarize_factor_presence}} for the original version
\code{\link{summarize_factor_presence_fixed}} for a flexible wrapper
}
