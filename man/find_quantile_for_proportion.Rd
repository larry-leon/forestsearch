% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_aft_dgm_flexible.R
\name{find_quantile_for_proportion}
\alias{find_quantile_for_proportion}
\title{Find Quantile for Target Subgroup Proportion}
\usage{
find_quantile_for_proportion(
  data,
  var_name,
  target_prop,
  direction = "less",
  tol = 1e-04
)
}
\arguments{
\item{data}{A data.frame containing the variable of interest}

\item{var_name}{Character string specifying the variable name to analyze}

\item{target_prop}{Numeric value between 0 and 1 specifying the target
proportion of observations to be included in the subgroup}

\item{direction}{Character string: "less" for values <= cutpoint (default),
"greater" for values > cutpoint}

\item{tol}{Numeric tolerance for root finding algorithm. Default is 0.0001}
}
\value{
A list containing:
\describe{
\item{quantile}{The quantile value (between 0 and 1) that achieves the
target proportion}
\item{cutpoint}{The actual data value corresponding to this quantile}
\item{actual_proportion}{The achieved proportion (should equal target_prop
within tolerance)}
}
}
\description{
Determines the quantile cutpoint that achieves a target proportion of
observations in a subgroup. Useful for calibrating subgroup sizes.
}
\details{
This function uses root finding (\code{uniroot}) to determine the quantile
that results in exactly the target proportion of observations being classified
into the subgroup. This is particularly useful when you want to ensure a
specific subgroup size regardless of the data distribution.
}
\examples{
\dontrun{
library(survival)
data(cancer)

# Find ER cutpoint for 12.5\% subgroup
result <- find_quantile_for_proportion(
  data = gbsg,
  var_name = "er",
  target_prop = 0.125,
  direction = "less"
)

print(result)
# Use in subgroup definition
subgroup_cuts = list(
  er = list(type = "quantile", value = result$quantile)
)
}

}
\seealso{
\code{\link{generate_aft_dgm_flex}}
}
