% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_k_inter_efficient_documented.R
\name{find_k_inter_grid_search}
\alias{find_k_inter_grid_search}
\title{Grid Search for k_inter to Achieve Target Hazard Ratio}
\usage{
find_k_inter_grid_search(
  target_hr_harm,
  k_inter_grid = seq(-5, 5, by = 0.5),
  data,
  continuous_vars,
  factor_vars,
  outcome_var,
  event_var,
  treatment_var,
  subgroup_vars,
  subgroup_cuts,
  k_treat = 1,
  n_super = 5000,
  verbose = TRUE
)
}
\arguments{
\item{target_hr_harm}{Numeric value specifying the target hazard ratio for
the harm subgroup. Must be positive.}

\item{k_inter_grid}{Numeric vector of k_inter values to evaluate. Default is
seq(-5, 5, by = 0.5).}

\item{data}{A data.frame containing the dataset to use for model fitting.}

\item{continuous_vars}{Character vector of continuous variable names.}

\item{factor_vars}{Character vector of factor/categorical variable names.}

\item{outcome_var}{Character string specifying the outcome/time variable name.}

\item{event_var}{Character string specifying the event/status variable name.}

\item{treatment_var}{Character string specifying the treatment variable name.}

\item{subgroup_vars}{Character vector of subgroup-defining variable names.}

\item{subgroup_cuts}{Named list of cutpoint specifications.}

\item{k_treat}{Numeric treatment effect modifier. Default is 1.}

\item{n_super}{Integer size of super population. Default is 5000.}

\item{verbose}{Logical indicating whether to show progress. Default is TRUE.}
}
\value{
A list of class "k_inter_grid_result" containing:
\describe{
\item{k_inter}{Numeric value of best k_inter from grid}
\item{achieved_hr_harm}{Numeric value of achieved hazard ratio}
\item{target_hr_harm}{Numeric value of target hazard ratio}
\item{error}{Numeric value of minimum absolute error}
\item{all_results}{Data.frame with all grid search results}
\item{method}{Character string "grid-search"}
}
}
\description{
Uses grid search to find the interaction parameter (k_inter) that achieves
a specified target hazard ratio in the harm subgroup. More robust than
root-finding but slower.
}
\details{
This function evaluates the hazard ratio at each point in the grid and
selects the k_inter value that minimizes the absolute error from the target.
The complete results are returned for visualization of the relationship
between k_inter and hazard ratios.
}
\examples{
\dontrun{
# Grid search for k_inter
result <- find_k_inter_grid_search(
  target_hr_harm = 1.5,
  k_inter_grid = seq(-3, 3, by = 0.2),
  data = gbsg,
  continuous_vars = c("age", "er", "pgr"),
  factor_vars = c("meno", "grade"),
  outcome_var = "rfstime",
  event_var = "status",
  treatment_var = "hormon",
  subgroup_vars = c("er", "meno"),
  subgroup_cuts = list(
    er = list(type = "quantile", value = 0.25),
    meno = 0
  )
)

# Plot results
plot(result$all_results$k_inter, result$all_results$hr_harm,
     type = "b", xlab = "k_inter", ylab = "Harm HR")
abline(h = 1.5, col = "red")
}

}
\seealso{
\code{\link{find_k_inter_for_target_hr}} for root-finding method
\code{\link{plot.k_inter_grid_result}} for plotting results
}
